{% extends "stats/base.html" %}

{% block content %}

<a class="imglink" href="/stats/season/{{ season.id }}/"><img style="width: 100%; margin-top:190px; margin-bottom: 90px;" src="/static/stats/season2.png"></a>

<p> </p>

<table class="centercontent" width="70%">
	<tr class="centercontent">
		<td>
		</td>
	</tr>
	<tr class="centercontent">
		<td>
		<table class="centercontent" width="100%">
			<td class="pagebutton" width="33%">
				<div style="font-size:20;">
					<a href="/stats/season/{{ season.id }}/players/"><b>Players</b></a>
				</div>
			</td>
			<td class="pagebutton" width="33%">
				<div style="font-size:20;">
					<a href="/stats/season/{{ season.id }}/teams/"><b>Teams</b></a>
				</div>
			</td>
			<td class="pagebutton" width="33%">
				<div style="font-size:20;">
					<a href="/stats/season/{{ season.id }}/champions/"><b>Champions</b></a>
				</div>
			</td>

		</table>
		</td>
	</tr>
	<tr>
		<th style="padding-top: 30px;" class="centertableheader">
			Player Stats
		</th>
	</tr>
	<tr>
		<td>
			<table id="playerTable" style="margin-bottom:20px; margin-top:20px;" class="centercontent tablesorter">
				<thead>
				<tr>
					<th class="sortableheader" width="10%">
						Player
					</th>
					<th class="sortableheader" width="10%">
						Team
					</th>
					<th class="sortableheader" width="10%">
						Position	
					</th>
					<th class="sortableheader" width="10%">
						Avg<br>
						Kills
					</th>
					<th class="sortableheader" width="10%">
						Avg<br>
						Deaths
					</th>
					<th class="sortableheader" width="10%">
						Avg<br>
						Assists
					</th>
					<th class="sortableheader" width="10%">
						KDA
					</th>
					<th class="sortableheader" width="10%">
						Kill
						</br>
						Participation
					</th>
					<th class="sortableheader" width="10%">
						CS/Game	
					</th>
					<th class="sortableheader" width="10%">
						Team Damage %
					</th>
				</tr>
				</thead>
				<tbody>
				{% for team_player in team_players %}
				{% if team_player.get_player_matches.count > 0 %}
				<tr class="alternating-back">
					<td>
						{{ team_player.player.name }}
					</td>
					<td>
						<div style="position: absolute; opacity: 0.0;">{{ team_player.team.id }}</div>
						<img height="50" width="50" src="{{ team_player.team.icon.url }}" title="{{ team_player.team.name }}">
					</td>
					<td>
						<div style="position: absolute; opacity: 0.0;">{{ team_player.role.id }}</div>
						<img height="40" width="40" src="{{ team_player.role.icon.url }}" title="{{ team_player.role.name }}">
					</td>
					<td>
						{{ team_player.get_avg_kills|floatformat:"1" }}
					</td>
					<td>
						{{ team_player.get_avg_deaths|floatformat:"1" }}
					</td>
					<td>
						{{ team_player.get_avg_assists|floatformat:"1" }}
					</td>
					<td>
						{{ team_player.get_kda|floatformat:"2" }}
					</td>
					<td>
						{{ team_player.get_kill_participation|floatformat:"1" }}%
					</td>
					<td>
						{{ team_player.get_cs_per_game|floatformat:"1" }}
					</td>
					<td>
						{{ team_player.get_percent_team_damage|floatformat:"1" }}%
					</td>

				</tr>
				{% endif %}
				{% endfor %}
				</tbody>
			</table>
		</td>
	</tr>
</table>
<script type="text/javascript">
$(document).ready(function() 
    { 
	    $("#playerTable").tablesorter( {sortList: [[0,0]]} ); 
    } 
); 
	</script>

{% endblock %}
