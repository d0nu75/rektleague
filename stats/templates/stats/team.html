{% extends "stats/base.html" %}

{% block title %}Rekt League | Team {{ team.name }}{% endblock %}

{% block content %}

<script type="text/javascript"><!--
function ReplacePlayerContent(id, content) {
	var container = document.getElementById(id);
	var contentMap = new Map();
	{% for team_player in players %}
	contentMap.set("{{ team_player.player.name }}",
			"<h1>{{ team_player.player.name }}</h1>" +
			"<h2>Team {{ team.name }} - {{ team_player.role }}</h2>" +
		        "<h3>Average Score: {{ team_player.avg_kills }}/{{ team_player.avg_deaths }}/{{ team_player.avg_assists }}</h3>" +
		"<table>" +
		"<tr>" +
		"<th width=\"60\"> </th>" +
		"<th width=\"60\">Games Played</th>" +
		"<th width=\"60\">Kills/Deaths/Assists</th>" +
		"<th width=\"60\">Winrate</th>" +
		"<th width=\"60\">Average CS</th>" +
		"</tr>" +
			{% for champion in team_player.get_played_champion_list %}
		"<tr>" +
		"<td><img src=\"{{ MEDIA_URL }}{{ champion.playermatch__champion__icon }}\" height=\"50\" width=\"50\" title=\"{{ champion.playermatch__champion__name }}\"></td>" +
		"<td><b>{{ champion.champion_count }}</b></td>" +
		"<td>{{ champion.avg_kills }}/{{ champion.avg_deaths }}/{{ champion.avg_assists }}</td>" +
		"<td>{{ champion.winrate }}%</td>" +
		"<td>{{ champion.average_cs}}</td>" +
		"</tr>" +
			{% endfor %}
		"</table>" +
			"");
	{% endfor %}
	contentMap.set("Overview",
			"<img src=\"{{ team.icon.url }}\">" +
			"<h1>Team {{ team.name }}</h1>" +
			"<h3>{{ team.get_record }}</h3>" +
		        "<h3>Popular Bans</h3>" +
		        "<table>" +
		        "<tr>" +
		        {% for champion in team.get_top_banned %}
          		"<th width=\"60\"><img src=\"{{ MEDIA_URL }}{{ champion.champion__icon }}\" height=\"50\" width=\"50\" title=\"{{ champion.champion__name }}\"></th>" +
          		{% endfor %}
		"</tr><tr style=\"background-color: white\">" +
		        {% for champion in team.get_top_banned %}
		"<td width=\"60\"><b>{{ champion.ban_rate }}%</b></td>" +
          		{% endfor %}
		"</tr></table>" +
		        "<h2>Match History</h2>" +
			{% for series in series_list %}
			"<p><a href=\"/stats/season/{{ team.season.id }}/series/{{ series.id }}/\">{{ series }}</a></p>" +
			{% endfor %}
		        "");
	container.innerHTML = contentMap.get(content);
}
window.onload = function() {
	ReplacePlayerContent('pagecontent','Overview');
}
//--></script>

<p> </p>

{% if players %}


    <div class="pagebar">
    <div class="pagebutton">
	    <a class="playerlink" href="javascript:ReplacePlayerContent('pagecontent','Overview')">
	    <p class="pagebuttonstyle">Overview</p>
    </a>
    </div>
    {% for team_player in players %}
    <div class="pagebutton">
	    <a class="playerlink" href="javascript:ReplacePlayerContent('pagecontent','{{ team_player.player.name }}')">
	    <p class="pagebuttonstyle">{{ team_player.player.name }}</p>
    </a>
    </div>
    {% endfor %}
    </div>
    <div id="pagecontent" onload="ReplacePlayerContent('pagecontent','Overview')">
    </div>

{% else %}
    <p>No Players.</p>
{% endif %}
{% endblock %}
